<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./CSS/style.css" />
    <title>Module 8</title>
  </head>
  <body>
    <section class="container">
      <h3 class="title">Node js</h3>
      <p>
        Легкая и эффективная среда выполнения JS. Позволяет писать
        высокопроизводительные серверные приложения и инструменты. Построена на
        JS движке V8 и написана на С++. <br />
        Сначала Node js создавалась как серверная среда обитания для приложений,
        но разработчики начали использовать ее для создания инструментов,
        помогающих автоматизировать выполнение локальных задач. В результате
        новая экосистема инструментов возникшая вокруг Node js привела к
        трансформации процесса front end разработок. <br />
        После установки в терминале будет доступна команда node. Чтобы убедиться
        что установка прошла успешно, проверьте версию, запустив команду node
        --version.
      </p>
      <p class="information">
        <b>Команда терминала</b><br />
        pwd (путь) - указывает путь к текущей папки <br />
        ls (list) - детальная информация содержимого в папках с указанием пути.
        ls -l, ls -la <br />
        clear - очистка терминала <br />
        Навигация - cd (change directory) - ".." - выход на один уровень вверх
        "на два уровня вверх ../../" <br />
      </p>
      <h3 class="title">JS вне браузера</h3>
      <p>
        Node js позволяет выполнять js код вне браузера. При открытии любого
        терминала выполнив команду node запустится REPL (read eval print loop) -
        интерактивная среда выполнения js кода. <br />Пакетный менеджер NPM
        <br />
        Чтобы использовать все разнообразие инструментов или пакетов node js нам
        необходимо возможность устанавливать и управлять ими. Для этого создан
        NPM (node package manager). Он устанавливает нужные пакеты и
        обеспечивает удобный интерфейс для работы с ними.
      </p>
      <ul>
        NPM состоит из трех основных компонентов
        <li>
          Сайт npmjs.com - используется для поиска и ознакомления с
          документацией пакетов
        </li>
        <li>
          Интерфейс комендной строки CLI - запускается из терминала и
          предоставляет набор команд для работы с реестром и пакетами, позволяет
          создавать скрипты для запуска в терминале
        </li>
        <li>
          Реестр пакетов - крупная, общедоступная база данных инструментов
          разработчиков
        </li>
      </ul>
      <p>
        Пакет (package) - небольшая js библиотека, решающая специфическую
        задачу. Пакеты пишут сами разработчики и делается с сообществом. Такой
        подход упрощает работу. <br />
      </p>
      <ul>
        Команды NPM. Пречислим основные команды и рассмотрим их.
        <li>
          npm init - инициализирует npm в проэкте и создает файл package.json
        </li>
        <li>
          npm install - устанавливает все зависимости перечисленные в
          package.json
        </li>
        <li>
          npm list --depth=0 - выводит в терминале список локально установленных
          пакетов с номерами их версий без зависимости
        </li>
        <li>
          npm install [package-name] - устанавливает пакет локально в папку
          node_moduls
        </li>
        <li>
          npm uninstall [package-name] - удаляет пакет, установленный локально и
          обновляет package.json
        </li>
        <li>
          npm start и npm test - запускает скрипт старт или тест, расположенный
          в package.json
        </li>
        <li>
          npm run [custom-script] - запускает кастомный скрипт, расположенный в
          package.json
        </li>
        <li>
          npm outdated - используется для поиска обновлений, обнаружит
          совместимые версии програмно и выведет список доступных обновлений
        </li>
        <li>
          npm update - обновит все пакеты до максимально разрешенной версии
        </li>
      </ul>
      <h3 class="title">Инциализация проэкта</h3>
      <p>
        Каждый проэкт начинается с создания файлов package.json. Он отслеживает
        зависимости, содержит служебную информацию, позволяет писать npm скрипты
        и служит инструкцией при создании нового проэкта на основе уже готовых
        настроек. Файл package.json можно создать npm командой init -
        инициализация проэкта в этой папке. Вам будет предложено ввести название
        проэкта, версию, описание и т.д. Можно нажать просто enter пока не будет
        создан package.json и размещен в папке проэкта. Чтобы не нажимать enter
        пропуская пустые поля использется команда init --yes. Флаг это
        дополнительная настройка для команды. <br />
        <b>npm init --yes</b> <br />
        У каждого флажка есть псевдоним, его сокращенная запись. Псевдоним флага
        --yes --y, поэтому команды npm init --yes и npm init --y делают одно и
        тоже <br />
        Будет создан package.json со значениями по умолчанию. Чтобы установить
        эти значения выполните в терминале следующие команды
      </p>
      <p class="information">
        npm config set init.author.name "name" <br />
        npm config set init.author.email "email"
      </p>
      <p>
        Файл package.json можно изменить вручную или выполнить npm init еще раз.
        Если открыть package.json он будет примерно выглядет как обычный объект.
        Это всего лишь мета данные о проэкте
      </p>
      <h3 class="title">NPM скрипты</h3>
      <p>
        Скрипты позволяют запускать для использования установленные пакеты.
        Используя npm скрипты можно создавать целые системы сборок проэктов.
        Автоматизирует запуск index.js. Для этого в файле package.json добавим
        скрипт запуска старт.
      </p>
      <p class="bg">
        { <br />
        "scripts": {<br />
        "start": "node test.js"<br />
        }<br />
        }<br />
      </p>
      <p>Теперь мы можем его запускать через команду npm start</p>
      <h3 class="title">Установка пакетов</h3>
      <p>
        Один из предоставляемых возможностей npm - установка пакетов, которые
        извлекаются из реестра и распаковываются в папку node_moduls в корне
        проэкта. После создания файла package.json можно добавлять зависимости в
        проэкт <br />
        Зависимостью называют npm пакет используемый в разработке. Это
        всевозможные утилиты и библиотеки. Установим библиотеку validator js для
        валидации строк, например ввод пользователя в поля форм
      </p>
      <p class="bg">npm install validator</p>
      <p>
        Npm загрузил валидатор и пометил его в node_moduls, в котором будут
        находится все внешние зависимости <br />
        package-lock.json это журнал снимков дерева в зависимости от проэкта. Он
        гарантирует что команда разработчиков использует одинаковые версии
        зависимости. Npm автоматически обновляет его при добавлении, удалении и
        обновлении пакетов. <br />
        В package.json появляется новая зависимость в поле dependencies. Это
        означает что валидатор версия 13.0.0 была установлена как зависимость и
        готова к работе. Пакеты постоянно обновляются и версия может отличаться,
        для этого и нужны поля замисимости
      </p>
      <p class="bg">
        "dependencies": { <br />
        "validator": "^13.12.0"<br />
        }<br />
      </p>
      <p>
        Чтобы получить интерфейс пакетов в node js коде необходимо вызвать
        функцию require("module name") передавая аргументом имя модуля без
        определения пути. Это называется абсолютный импорт. Путь не требуется,
        поскольку по умолчанию поиск модуля будет происходить в папке
        node_moduls. Результатом своего выполнения функции вернет интерфейс
        модуля с методами или просто функцию, зависит от пакета.
      </p>
      <p class="bg">
        const validator = require('validator'); <br />
        const validatorEmail = email => {<br />
        return validator.isEmail(email);<br />
        };<br />
        console.log('Это почта валидна? :', validatorEmail('mail@mail.com'));
        //Это почта валидна? : true<br />
        console.log('Это почта валидна? :', validatorEmail('mail.com'));//Это
        почта валидна? : false<br />
      </p>
      <h3 class="title">Удаление пакетов</h3>
      <p>
        Предположим что версия валидатора вызывает проблемы с совместимостью. Мы
        можем удалить этот пакет и поставить более старую версию
      </p>
      <p class="bg">
        //validator 13.0.0 <br />
        npm uninstall validator <br />
        // Устанавливаем более старую версию
        <br />
        npm install validator@11.0.0
      </p>
      <p>
        Установка пакетов определенной версии используется в коммерческих
        проэктах для того чтобы гарантировать работу кодовой базы и возможность
        долгосрочной поддержки.
      </p>
    </section>
    <script src="./js/moduleEight.js"></script>
    <script src="./js/test.js"></script>
  </body>
</html>
